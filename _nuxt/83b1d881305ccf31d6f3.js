(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{172:function(t,e,o){var content=o(175);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(32).default)("44d29c32",content,!0,{sourceMap:!1})},174:function(t,e,o){"use strict";var n=o(172);o.n(n).a},175:function(t,e,o){(t.exports=o(31)(!1)).push([t.i,".demo-split{height:200px;border:1px solid #dcdee2}.demo-split-pane{padding:10px}.fill-70height{height:70%}.dom_width{width:600px;height:350px;margin:0 auto}",""])},178:function(t,e,o){"use strict";o.r(e);o(30),o(15);var n={data:function(){return{active:"self",split1:.5,modal11:!1,modal22:!1,videolist:["https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/sing12.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/recite.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/goforward.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/backoff.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/turnleft.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/turnright.mp4","https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/self-intro.mp4"],imgfile:"http://www.pptbz.com/pptpic/UploadFiles_6909/201203/2012031220134655.jpg"}},mounted:function(){new VConsole},methods:{selected:function(t){console.log(this.active)},getBase64:function(t){var e=new FileReader;return e.readAsDataURL(t),new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(t){console.log("Error: ",t),o(t)}})},bupload:function(t){var e=this;if("image/jpg"!==t.type&&"image/jpeg"!==t.type&&"image/png"!==t.type)this.handleFormatError(t);else if(t.size>2097152)this.handleMaxSize(t);else{var o="image/png"===t.type?22:23;this.getBase64(t).then(function(n){$("#previewer").html('<img width="80%" src='.concat(n,' id="preview" alt=""/>')),e.$Notice.warning({title:"文件正在上传",desc:"文件 "+t.name+" 正在上传。"}),$.ajax({url:"https://service-4er9ght1-1251896466.ap-beijing.apigateway.myqcloud.com/release/picocrbeijing",method:"POST",data:n.slice(o),dataType:"json",success:function(t){console.log(t);var o=JSON.stringify(t.img?t.img:"");$("#restext").html("处理结果: "+t.text),$("#showres").html('<img width="80%" src='.concat(o,' id="showimgres" alt=""/>'));var n=document.getElementById("resvideo");if($("#resulttitle").html(t.text),"唱歌"==t.text){e.modal22=!0;var c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/sing12.mp4";n.src=c,n.load(c),n.play()}else if("朗诵"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/recite.mp4";n.src=c,n.load(c),n.play()}else if("前进"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/goforward.mp4";n.src=c,n.load(c),n.play()}else if("后退"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/backoff.mp4";n.src=c,n.load(c),n.play()}else if("左转"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/turnleft.mp4";n.src=c,n.load(c),n.play()}else if("右转"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/turnright.mp4";n.src=c,n.load(c),n.play()}else if("介绍自己"==t.text){e.modal22=!0;c="https://chf-1251896466.cos.ap-chengdu.myqcloud.com/video/self-into1.mp4";n.src=c,n.load(c),n.play()}},error:function(t){console.log("Error: ",t);var e=JSON.stringify(t.responseText?t.responseText:"");console.log(e),$("#showres").html('<img width="80%" src='.concat(e.img,' id="showimgres" alt=""/>'))}}).always(function(){})})}return!1},takephotos:function(){var video=document.getElementById("video"),t=document.getElementById("canvas").getContext("2d");(navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)&&this.getUserMedia({video:{width:480,height:320}},this.success,this.error),document.getElementById("capture").addEventListener("click",function(){t.drawImage(video,0,0,480,320)})},getUserMedia:function(t,e,o){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then(e).catch(o):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(t,e,o):navigator.mozGetUserMedia?navigator.mozGetUserMedia(t,e,o):navigator.getUserMedia&&navigator.getUserMedia(t,e,o)},success:function(t){window.URL||window.webkitURL;console.log(t),video.srcObject=t,video.play()},error:function(t){console.log("访问用户媒体设备失败".concat(t.name,", ").concat(t.message))},cutpic:function(){var t=document.getElementById("canvas"),e=t.getContext("2d");$("#canvas").mousedown(function(t){console.log(t.offsetX,t.offsetY)}),$("#canvas").mouseup(function(t){console.log(t.offsetX,t.offsetY)});var canvas=document.createElement("canvas");e=canvas.getContext("2d");canvas.width=canvasX,canvas.height=canvasY,e.drawImage(canvas1,void 0,void 0,canvasX,canvasY,canvasX,canvasY),document.body.appendChild(canvas),$("#previewer").html('<image width="80%" id="preview" />');var pre=document.getElementById("preview");console.log("cut"),pre.src=t.toDataURL(),console.log({img:pre.src})}}},c=(o(174),o(22)),component=Object(c.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Layout",{style:{padding:"0 50px"}},[o("Breadcrumb",{style:{margin:"16px 0"}},[o("BreadcrumbItem",[t._v("印刷宋体识别")])],1),t._v(" "),o("Content",{style:{padding:"24px 0",minHeight:"300px",background:"#fff"}},[o("Layout",[o("Sider",{style:{background:"#fff"},attrs:{"hide-trigger":""}},[o("Menu",{attrs:{"active-name":t.active,theme:"light",width:"auto","open-names":["1"]},on:{"on-select":t.selected}},[o("Submenu",{attrs:{name:"1"}},[o("template",{slot:"title"},[o("Icon",{attrs:{type:"ios-navigate"}}),t._v("汉字识别\n             ")],1),t._v(" "),o("MenuItem",{attrs:{name:"tencent"}},[t._v("老马腾讯云接口")]),t._v(" "),o("MenuItem",{attrs:{name:"self"}},[t._v("自己后端")])],2)],1)],1),t._v(" "),o("Modal",{attrs:{id:"photomodal",fullscreen:"","footer-hide":"",title:"拍照选图"},model:{value:t.modal11,callback:function(e){t.modal11=e},expression:"modal11"}},[o("Button",{attrs:{id:"capture",type:"primary"}},[t._v("拍照")]),t._v(" "),o("Button",{attrs:{type:"warining"},on:{click:t.cutpic}},[t._v("开始裁剪")]),t._v(" "),o("Divider"),t._v(" "),o("Split",{model:{value:t.split1,callback:function(e){t.split1=e},expression:"split1"}},[o("div",{staticClass:"photoleft",attrs:{slot:"left"},slot:"left"},[o("video",{attrs:{id:"video",width:"480",height:"320",controls:""}})]),t._v(" "),o("div",{staticClass:"photoright",attrs:{slot:"right"},slot:"right"},[o("canvas",{attrs:{id:"canvas",width:"480",height:"320"}})])])],1),t._v(" "),o("Modal",{attrs:{id:"resultmodal","footer-hide":"",draggable:""},model:{value:t.modal22,callback:function(e){t.modal22=e},expression:"modal22"}},[o("h1",{attrs:{id:"resulttitle"}},[t._v("唱歌")]),t._v(" "),o("Divider"),t._v(" "),o("div",[o("video",{attrs:{id:"resvideo",width:"480",height:"320",controls:""}})])],1),t._v(" "),o("Content",{style:{padding:"24px",minHeight:"768px",background:"#fff"}},[o("Row",{attrs:{gutter:15}},[o("Col",{attrs:{span:"2"}},[o("Upload",{attrs:{action:"","before-upload":t.bupload}},[o("Button",{attrs:{type:"primary"}},[t._v("本地选图")])],1)],1),t._v(" "),o("Col",{attrs:{span:"2"}},[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.takephotos(),t.modal11=!0}}},[t._v("拍照选图")])],1),t._v(" "),o("Col",{attrs:{span:"2"}},[o("Button",{attrs:{type:"error"},on:{click:function(e){t.modal22=!0}}},[t._v("查看结果")])],1),t._v(" "),o("Col",{attrs:{span:"2"}},[o("i-switch",{attrs:{size:"large"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),t._v(" "),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),t._v(" "),o("div",{staticClass:"demo-split fill-70height"},[o("Split",{model:{value:t.split1,callback:function(e){t.split1=e},expression:"split1"}},[o("div",{staticClass:"demo-split-pane",attrs:{slot:"left"},slot:"left"},[o("div",{attrs:{id:"previewer"}})]),t._v(" "),o("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[o("p",{attrs:{id:"restext"}},[t._v("处理结果:")]),t._v(" "),o("div",{attrs:{id:"showres"}})])])],1)],1)],1)],1)],1)},[],!1,null,null,null);e.default=component.exports}}]);